<div class="comentarios-container">
  <h2>Comentarios Realizados</h2>
  <div class="comentario-list">
    @if (comentarios.length === 0) {
      <p class="no-publicaciones">No hay comentarios para mostrar.</p>
    } @else {
      @for (comentario of comentarios; track comentario.id) {
        @if (estaActivada(comentario.idDestinatario)) {
          <div
            class="comentario-card"
            [class.reported]="comentario.reportada"
            (click)="irAPerfilProfesional(comentario.idDestinatario)"
          >
            <div class="comentario-header">
              <img [src]="imagenUrl" alt="Tú" class="avatar avatar-contratador" loading="lazy" />
              <div class="creador-info">
                <span class="nombre-creador">{{ usuContratador.nombreCompleto }}</span>
                <span class="puntaje">★ {{ comentario.puntaje }}/5</span>
              </div>

              <div class="profesional-info">
                <div class="profesional-details">
                  <img
                    [src]="imagenesProf[comentario.idDestinatario] || 'public/avatar.png'"
                    [alt]="getUsuarioProfesional(comentario.idDestinatario)!.nombreCompleto"
                    class="avatar avatar-profesional"
                    loading="lazy"
                  />
                  <span class="nombre-profesional">
                    {{ getUsuarioProfesional(comentario.idDestinatario)!.nombreCompleto }}
                  </span>
                </div>
              </div>
            </div>

            <div class="comentario-content">
              <p>{{ comentario.contenido }}</p>
            </div>

            <div class="comentario-actions">
              @if (!comentario.reportada) {
                <button (click)="eliminar(comentario.id)" class="delete-button" title="Eliminar">
                  Eliminar
                </button>
                <a [routerLink]="['modComentPerfilCont', comentario.id]" class="edit-link" title="Editar">
                  Modificar
                </a>
              } @else if (comentario.reportada && comentario.idCreador === idContratador) {
                <span class="reported-label">Reportado</span>
              }
            </div>
          </div>
        }
      }
    }
  </div>
</div>
