<section class="add-comentario-container">
  <h2>Modificar Comentario</h2>

  <form [formGroup]="formulario" (ngSubmit)="update()" class="comentario-form">

    <div class="form-group">
      <label for="contenido">Comentario</label>
      <textarea
        id="contenido"
        formControlName="contenido"
        placeholder="Escribe tu comentario aquÃ­..."
        (input)="autoResize($event)"
        rows="4"
        maxlength="500"
      ></textarea>

      @if (contentLength() >= 450) {
        <div class="char-counter warning">
          {{ contentLength() }}/500
        </div>
      } @else {
        <div class="char-counter">
          {{ contentLength() }}/500
        </div>
      }

      @if (formulario.get('contenido')?.touched && formulario.get('contenido')?.hasError('required')) {
        <span class="error-message">El comentario es obligatorio.</span>
      }
      @if (formulario.get('contenido')?.touched && formulario.get('contenido')?.hasError('maxlength')) {
        <span class="error-message">El comentario no puede exceder los 500 caracteres.</span>
      }
      @if (formulario.get('contenido')?.touched && formulario.get('contenido')?.hasError('whitespace')) {
        <span class="error-message">No se aceptan solo espacios en blanco.</span>
      }
    </div>


    <div class="form-actions">
      <button type="submit" class="submit-button" [disabled]="formulario.invalid">
        Actualizar comentario
      </button>
      <button type="button" class="reset-button" (click)="reestablecer()">
        Restablecer
      </button>
    </div>
  </form>
</section>
