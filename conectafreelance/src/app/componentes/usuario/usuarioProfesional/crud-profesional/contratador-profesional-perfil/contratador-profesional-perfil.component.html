<div class="profile-container">
  <aside class="info-perfil">
    <div class="profile-image">
      <img
        [src]="imagenUrl"
        alt="Foto de perfil de {{ usuarioProf.nombreCompleto || 'Usuario' }}"
        loading="lazy"
      />
    </div>
    <div class="profile-info">
      <h1>{{ usuarioProf.nombreCompleto || 'Nombre no disponible' }}</h1>
      <p class="profession">{{ usuarioProf.profesion || 'Profesión no especificada' }}</p>
    </div>

    <section class="profile-details">
      <h2>Sobre mí</h2>
      <p class="description">{{ usuarioProf.descripcion || 'Sin descripción disponible' }}</p>
      <div class="location">
        <span class="material-icons">location_on</span>
        <p>{{ usuarioProf.ciudad || 'Ciudad' }}, {{ usuarioProf.provincia || 'Provincia' }}, {{ usuarioProf.pais || 'País' }}</p>
      </div>
    </section>

    <section class="profile-ratings">
      <div class="ratings-info">
        <div class="rating">
          <span class="material-icons">star</span>
          <p>{{ usuarioProf.promedio ? usuarioProf.promedio.toFixed(1) : '0.0' }} / 5</p>
        </div>
        <div class="comments">
          <span class="material-icons">comment</span>
          <p>{{ usuarioProf.cantComentarios || 0 }} comentario(s)</p>
        </div>
      </div>
    </section>

    <div class="button-group">
      <button
        (click)="iniciarChat(usuarioProf)"
        class="chat-button"
        [attr.aria-label]="'Iniciar chat con ' + (usuarioProf.nombreCompleto || 'Usuario')"
      >
        <span class="material-icons">chat</span>
        Chat
      </button>
      <button
        (click)="addUsuarioALista()"
        class="favorite-button"
        [attr.aria-label]="'Agregar a favoritos a ' + (usuarioProf.nombreCompleto || 'Usuario')"
      >
        <span class="material-icons">favorite</span>
        Favoritos
      </button>
    </div>
  </aside>

  <section class="profile-content-switcher">
    <div class="tab-buttons">
      <button
        (click)="setActiveTab('publicaciones')"
        [class.active]="activeTab === 'publicaciones'"
        aria-label="Mostrar publicaciones"
        class="tab-button"
      >
        Publicaciones
      </button>
      <button
        (click)="setActiveTab('comentarios')"
        [class.active]="activeTab === 'comentarios'"
        aria-label="Mostrar comentarios"
        class="tab-button"
      >
        Comentarios
      </button>
    </div>

    <div class="tab-content">
      @if (activeTab === 'publicaciones') {
        <app-list-publicacion-contprofperf></app-list-publicacion-contprofperf>
      } @else {

        <app-add-comentario (puntajeAEliminar)="quitarPuntajeAPromedio($event)" (puntajeAEmitir)="actualizarPromedio($event)"></app-add-comentario>

      }
    </div>
  </section>
</div>

