<section class="form-container">
  <h2>Modificar Publicaci√≥n</h2>
  <fieldset>
    <form [formGroup]="formulario" (ngSubmit)="update()">
      <label for="fotoPublicacion" class="form-control-label">
        @if (imagenPublicacion) {
          <img [src]="imagenPublicacion" alt="Foto de la publicaci√≥n" loading="lazy"/>
        } @else {
          <div>Sin imagen de publicaci√≥n</div>
        }
        <div>Foto de la publicaci√≥n</div>
      </label>

      <div class="publicacion-input">
        <label for="cont">Contenido</label>
        <textarea
          id="cont"
          class="input textarea"
          formControlName="cont"
          placeholder="¬øQu√© est√°s pensando?"
          rows="4"
          (input)="restrictLength($event); autoResize($event)"
        ></textarea>
        @if (formulario.controls['cont'].touched && formulario.controls['cont'].hasError('required')) {
          <div class="error">El contenido es obligatorio</div>
        }
        @if (formulario.controls['cont'].touched && formulario.controls['cont'].hasError('maxlength')) {
          <div class="error">El contenido no puede exceder los 500 caracteres</div>
        }
        @if (contentLength() >= 450) {
          <div class="char-counter warning">
            {{ contentLength() }}/500
          </div>
        } @else {
          <div class="char-counter">
            {{ contentLength() }}/500
          </div>
        }

        @if(formulario.controls['cont'].touched && formulario.controls['cont'].hasError('whitespace')){
          <div class="error">No se aceptan cadenas vacias</div>
        }

      </div>

      <div class="form-actions">
        <button type="submit" class="btn btn-primary">üì§ Actualizar</button>
        <button type="button" class="btn btn-secondary" (click)="reestablecer()">‚ùå Restablecer</button>
      </div>
    </form>
  </fieldset>
</section>
